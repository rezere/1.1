using System;
using System.Text;
using System.Linq;

class Program
{
    static void Main()
    {
        // Встановлення кодування консолі на UTF-8
        Console.OutputEncoding = Encoding.UTF8;

        string alphabet = "АБВГҐДЕЄЖЗИІЇЙКЛМНОПРСТУФХЦЧШЩЬЮЯ_'";
        string key = "гра";
        string text = "Однією_з_найбільш_значущих_інновацій_у_ігровій_індустрії_є_використання_штучного_інтелекту_ШІ_не_тільки_поліпшує_ігровий_процес_створюючи_більш_реалістичних_персонажів_і_складні_сюжетні_лінії_але_й_відкриває_нові_можливості_для_навчання_та_розвитку_через_ігрові_сценарії_Наприклад_у_іграх_серії_The_Witcher_ШІ_використовується_для_створення_унікальних_персонажів_зі_своїми_історіями_та_мотиваціями_що_робить_світ_гри_більш_живим_та_переконливим_Розвиток_технологій_віртуальної_VR_та_доповненої_реальності_AR_радикально_змінив_спосіб_взаємодії_гравців_з_ігровим_світом_VR_гарнітури_такі_як_Oculus_Rift_або_HTC_Vive_дозволяють_гравцям_повністю_зануритися_у_віртуальні_світи_переживаючи_унікальні_відчуття_та_емоції_Ігри_такі_як_Beat_Saber_у_VR_забезпечують_повне_занурення_та_новий_рівень_інтерактивності_AR_ігри_наприклад_Pokеmon_GO_змінили_спосіб_яким_люди_взаємодіють_з_реальним_світом_через_ігри_Використання_віртуальної_реальності_VR_у_навчанні_відкриває_нові_можливості_для_освітнього_процесу_пропонуючи_інтерактивні_та_інтенсивні_навчальні_досвіди_Розвиток_технологій_машинного_навчання_та_нейромереж_відкриває_нові_можливості_для_персоналізації_ігрового_досвіду_Ігри_можуть_адаптуватися_до_стилю_гри_конкретного_гравця_пропонуючи_унікальні_виклики_та_сценарії_Middle-earth_Shadow_of_Mordor_та_Shadow_of_War_У_цих_іграх_використовується_система_Nemesis_яка_використовує_машинне_навчання_для_створення_унікальних_ворогів_які_пам'ятають_попередні_зустрічі_з_гравцем_і_реагують_відповідно_до_минулих_подій_Розвиток_гейміфікації_та_інтерактивного_навчання_використовує_ігрові_механіки_у_навчальних_цілях_Ігри_такі_як_Kerbal_Space_Program_використовуються_для_вивчення_аерокосмічної_інженерії_та_фізики_роблячи_навчання_більш_захоплюючим_і_ефективним_Minecraft_Education_Edition_використовується_у_навчальних_закладах_по_всьому_світу_включаючи_Сполучені_Штати_Канаду_Великобританію_Австралію_та_багато_країн_Європи_та_Азії_Ця_освітня_версія_популярної_гри_Minecraft_здобула_визнання_серед_вчителів_і_учнів_завдяки_своєму_універсальному_підходу_до_навчання_через_ігри_Відеоігри_стали_платформою_для_соціальних_взаємодій_та_спільнот_Ігри_як_Fortnite_та_Minecraft_стали_не_просто_місцем_для_гри_але_й_для_соціальної_взаємодії_де_люди_зустрічаються_спілкуються_та_навіть_проводять_спільні_заходи";

        string encryptedText = VigenereEncrypt(text, key, alphabet);
        Console.WriteLine("Квадрат Віженера:");
        PrintVigenereSquare(alphabet);
        Console.WriteLine("\nКлюч: " + key);
        Console.WriteLine("Зашифрований текст: " + encryptedText);
    }

    static void PrintVigenereSquare(string alphabet)
    {
        int n = alphabet.Length;

        for (int i = 0; i < n; i++)
        {
            for (int j = 0; j < n; j++)
            {
                Console.Write(alphabet[(i + j) % n]);
            }
            Console.WriteLine();
        }
    }

    static string VigenereEncrypt(string text, string key, string alphabet)
    {
        text = text.ToUpper().Replace(" ", ""); // Видалення пробілів та перетворення на великі літери
        key = key.ToUpper();

        string result = "";
        int keyIndex = 0;

        foreach (char c in text)
        {
            if (!alphabet.Contains(c))
            {
                result += c;
                continue;
            }

            int textCharIndex = alphabet.IndexOf(c);
            int keyCharIndex = alphabet.IndexOf(key[keyIndex]);
            int cipherCharIndex = (textCharIndex + keyCharIndex) % alphabet.Length;

            result += alphabet[cipherCharIndex];

            keyIndex = (keyIndex + 1) % key.Length;
        }

        return result;
    }
}